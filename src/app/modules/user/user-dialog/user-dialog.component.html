<div class="d-flex justify-content-between align-items-center">
  <h2>{{data.action | titlecase}}</h2>
  <p *ngIf="data.action==='update'" class="mat-caption">{{user._id}}</p>
</div>

<form #entityForm="ngForm" id="entityForm" novalidate>
  <mat-form-field class="w-100">
    <mat-label>Email</mat-label>
    <input matInput [(ngModel)]="user.email" autocomplete="off" name="email">
    <mat-icon matSuffix>text_fields</mat-icon>
  </mat-form-field>
  <mat-form-field class="w-100">
    <mat-label>Password</mat-label>
    <input matInput [(ngModel)]="user.password" autocomplete="off" name="password" type="password">
    <mat-icon matSuffix>lock</mat-icon>
  </mat-form-field>
  <mat-form-field class="w-100">
    <mat-label>Name</mat-label>
    <input matInput [(ngModel)]="user.name" autocomplete="off" name="name">
    <mat-icon matSuffix>text_fields</mat-icon>
  </mat-form-field>
  <mat-form-field class="w-100">
    <mat-label>Role</mat-label>
    <input matInput [matAutocomplete]="roleAuto" [(ngModel)]="user.role" (ngModelChange)="roleChanged($event)"
           autocomplete="off" name="role">
    <mat-spinner *ngIf="isLoadingRoles" diameter="20" matSuffix></mat-spinner>
    <mat-autocomplete #roleAuto="matAutocomplete" [displayWith]="roleDisplayFn">
      <mat-option *ngFor="let role of filteredRoles | async" [value]="role">
        {{role.name}}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>


  <!--  <mat-form-field class="w-100">-->
  <!--    <mat-label>IsVerified</mat-label>-->
  <!--    <input [(ngModel)]="user.isVerified" autocomplete="off" matInput name="isVerified">-->
  <!--    <mat-icon matSuffix>text_fields</mat-icon>-->
  <!--  </mat-form-field>-->
  <div class="w-100">
    <mat-slide-toggle [(ngModel)]="user.isVerified" name="isVerified">
      IsVerified
    </mat-slide-toggle>
  </div>

  <div class="d-flex justify-content-end">
    <ng-container>
      <button (click)="save()" *ngIf="!isLoading; else loadingButton" [disabled]="entityForm.pristine"
              color="primary" mat-raised-button>Save
      </button>
      <ng-template #loadingButton>
        <button color="accent" disabled mat-raised-button>
          <mat-spinner class="m-2" diameter="20"></mat-spinner>
        </button>
      </ng-template>
    </ng-container>
  </div>
</form>
